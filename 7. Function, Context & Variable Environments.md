# ğŸŸ¦ Function, Context y Variable Environments (JS)

---

## ğŸŸ© 1. Function (Funciones en JavaScript)

En JavaScript, una **funciÃ³n** es un bloque de cÃ³digo reutilizable que se puede ejecutar cuando se invoque.

Pero **no es solo cÃ³digo**:
cuando una funciÃ³n se crea, JavaScript tambiÃ©n crea internamente una **Function Object**, que incluye:

- el cÃ³digo de la funciÃ³n,
- su **Lexical Environment** (donde fue escrita),
- su espacio para parÃ¡metros y variables,
- y una referencia al **Outer Environment**.

### ğŸ“Œ En resumen:

Una funciÃ³n = **cÃ³digo + contexto donde fue creada**.

### ğŸ§  AnalogÃ­a del cerebro

Es como un **procedimiento mental almacenado**:
no solo guardas el â€œpaso a pasoâ€, sino tambiÃ©n **el contexto** donde aprendiste esa habilidad.

Ejemplo:

- Aprendes a manejar â†’ funciÃ³n
- Se asocia con la ciudad donde aprendiste, las reglas de trÃ¡fico â†’ lexical environment

---

## ğŸŸ¦ 2. Context (Execution Context)

Un **Execution Context** es el entorno en el que **se ejecuta** una funciÃ³n o el cÃ³digo global.

Cada vez que llamas a una funciÃ³n, JavaScript crea un nuevo Execution Context.

EstÃ¡ compuesto por tres partes:

1. **Variable Environment**
   (variables declaradas con `var`)

2. **Lexical Environment**
   (variables `let` y `const`, funciones internas, closures)

3. **this binding**

### ğŸ“Œ Tipos de Execution Context:

| Tipo                           | QuÃ© representa                              |
| ------------------------------ | ------------------------------------------- |
| **Global Execution Context**   | Todo el programa, una sola vez              |
| **Function Execution Context** | Cada vez que se ejecuta una funciÃ³n         |
| **Eval Execution Context**     | (poco usado) para cÃ³digo dentro de `eval()` |

---

### ğŸ§  AnalogÃ­a del cerebro

Un Execution Context es como **un estado mental temporal** que tu cerebro activa para una tarea especÃ­fica.

Ejemplo:

- EstÃ¡s resolviendo un problema de matemÃ¡ticas â†’ abres un â€œcontexto de ejecuciÃ³n cognitivoâ€.
- Tienes acceso a:

  - tu memoria a corto plazo â†’ variable environment
  - conocimientos y reglas previas â†’ lexical environment
  - tu perspectiva (self) â†’ this binding

Cuando terminas, ese â€œcontextoâ€ se desmonta â†’ igual que cuando la funciÃ³n termina.

---

## ğŸŸ§ 3. Variable Environment

El **Variable Environment** es la parte del Execution Context donde se guardan:

- variables declaradas con `var`
- parÃ¡metros de la funciÃ³n
- el objeto `arguments`

Pero algo importante:

### ğŸ”¹ El Variable Environment se crea durante la **Creation Phase**

Cuando se invoca una funciÃ³n:

1. Se crea el Execution Context
2. Se prepara el **Variable Environment**
3. Todas las variables `var` se inicializan con `undefined`
4. Luego viene la **Execution Phase** y el cÃ³digo se ejecuta lÃ­nea a lÃ­nea

### ğŸ“Œ Detalles importantes

- `var` **sÃ­** es hoisted (subido con valor `undefined`)
- `let` y `const` **no** estÃ¡n en el Variable Environment, sino en el **Lexical Environment**

Ejemplo:

```js
function test() {
  console.log(a); // undefined
  var a = 10;
}
```

En creaciÃ³n:

```
var a = undefined;
```

En ejecuciÃ³n:

```
a = 10;
```

---

### ğŸ§  AnalogÃ­a del cerebro

El Variable Environment es como tu **memoria de trabajo inmediata**, donde el cerebro coloca:

- datos temporales,
- valores,
- inputs recientes,
- variables necesarias para el razonamiento actual.

Mientras mÃ¡s variables hay, mÃ¡s carga cognitiva â†’ igual que en un Execution Context saturado.

---

## ğŸŸ¨ Resumen estructural

AquÃ­ va una visiÃ³n compacta:

```
Execution Context
â”œâ”€â”€ Variable Environment (var, params, arguments)
â”œâ”€â”€ Lexical Environment (let, const, closures)
â””â”€â”€ this binding
```

- **Function** = bloque de cÃ³digo + su entorno donde fue creada
- **Context** = entorno donde se ejecuta la funciÃ³n
- **Variable Environment** = espacio donde se almacenan variables tipo `var`

---

## ğŸŸª Resumen con analogÃ­a neurocientÃ­fica

| Concepto JS              | QuÃ© es                            | AnalogÃ­a Cerebro                      |
| ------------------------ | --------------------------------- | ------------------------------------- |
| **Function**             | Objeto con cÃ³digo y su entorno    | Habilidad mental aprendida + contexto |
| **Execution Context**    | Estado donde el cÃ³digo se ejecuta | Estado mental activado para una tarea |
| **Variable Environment** | Variables temporales (`var`)      | Memoria de trabajo inmediata          |

---

Anterior tema: [Function Invocation & The Execution Stack](./6.%20Function%20Invocation%20%26%20The%20Execution%20Stack.md)
Siguiente tema: [The Scope Chain](./8.%20The%20Scope%20Chain.md)
